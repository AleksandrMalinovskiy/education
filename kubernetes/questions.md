1. Что такое Kubernetes?
<details>
  <summary>Ответ</summary>
Kubernetes (также известный как K8s или «kube») – система, управляющая контейнерами* (контейнеризированными приложениями), где контейнер объясняется как «легковесная» виртуальная машина. Чтобы создать приложение, необходимо создать множество контейнеров, а затем использовать Kubernetes для управления этими контейнерами.
</details>

2. Расскажите об основных компонентах kubernetes?
<details>
  <summary>Ответ</summary>
На мастер-узле, также известном как Control Plane (иногда его переводят как «управляющий слой» — прим. перев.), выполняется большинство важных задач по управлению и администрированию кластера. 

Он включает в себя четыре основных компонента:

- API server (API-сервер);
  
- scheduler (планировщик);
  
- controller manager (менеджер контроллеров);

- etcd.
 
Мы уже рассмотрели, что такое мастер-узел. Но настоящая работа происходит именно на рабочих узлах. А всё потому, что на каждом узле есть компоненты, отвечающие за его бесперебойное функционирование

Они включают в себя:

kubelet;
  
kube-proxy;
  
container runtime.
</details>

3. Что такое API server (API-сервер) master node ? 
<details>
  <summary>Ответ</summary>
Для любых манипуляций с кластером приходится обращаться к API-серверу с помощью Kubernetes API. Используете kubectl, REST или любую из клиентских библиотек Kubernetes? Все они завязаны на API Kubernetes'а и взаимодействуют с API-сервером.

Примечательная особенность API-сервера состоит в том, что он умеет масштабироваться по горизонтали. Другими словами, при резком увеличении количества поступающих запросов API-сервер может создавать «клоны» или реплики самого себя, чтобы справиться с нагрузкой.
</details>

4. Что такое scheduler (планировщик) master node ?
<details>
  <summary>Ответ</summary>
Каждому Pod’у требуются определенные ресурсы: память, CPU, железо… в общем, стандартный набор. Планировщик должен решить, какой узел соответствует требованиям Pod’а. Поэтому планировщик выполняет два действия:

Подбирает узлы-кандидаты для Pod’а;

Останавливает свой выбор на одном из них.
</details>

5. Что такое controller-manager?
<details>
  <summary>Ответ</summary>
На самом деле контроллер — это просто бесконечный цикл, который постоянно следит за неким ресурсом в кластере (например, за Pod’ом). Если что-то идет не так, он исправляет возникшую проблему.
</details>

6. Какие типы controller-manager вы знаете?
<details>
  <summary>Ответ</summary>
endpoints controller - заполняет объект конечных точек (Endpoints), то есть связывает сервисы (Services) и поды (Pods)
service accounts controller и token controller -  создают стандартные учетные записи и токены доступа API для новых пространств имен.
replication controller - поддерживает правильное количество подов для каждого объекта контроллера репликации в системе

</details>

7. Для чего etcd в kubernetes?
<details>
  <summary>Ответ</summary>
Etcd — это личный журнал Kubernetes. Скажите, зачем люди ведут личные дневники и журналы? Все просто: чтобы сохранить в памяти мимолетные моменты (увы, мозг не способен хранить все события каждого дня нашей жизни).

То же самое и с Kubernetes. Всё, что происходит в кластере, должно быть записано и сохранено. Вообще всё! И тут на сцену выходит etcd. Эта база данных типа ключ-значение выступает резервным хранилищем для Kubernetes.
</details>

8. Что такое kubelet worker node?
<details>
  <summary>Ответ</summary>
kubelet — это агент, который следит за тем, чтобы на узле всё работало должным образом. Подобная работа подразумевает ряд задач.

Первая — взаимодействие с мастер-узлом. Обычно мастер-узел отправляет задачу в форме манифеста или спецификации (Podspec). Манифест определяет, какие работы необходимо провести и какие Pod’ы нужно создать. 

Вторая — взаимодействие с исполняемой средой контейнера (container runtime) на узле. Исполняемая среда скачивает нужные образы, после чего вступает в действие kubelet, мониторя Pod’ы, созданные с использованием этих образов.

Третья — проверки (probes) состояния Pod’ов. Кто отвечает за них? Конечно же, kubelet! Потому что следить за здоровьем Pod’а — его обязанность!
</details>

9. Что такое kube-proxy worker node?
<details>
  <summary>Ответ</summary>
Следующий неотъемлемый элемент — работа с сетью, и kube-proxy готов позаботиться об этом. Он работает как балансировщик нагрузки, распределяя трафик между Pod’ами, а также следит за соблюдением сетевых правил. Можно сказать, что kube-proxy полностью отвечает за коммуникации внутри кластера.
</details>

10. Что такое container runtime worker node?
<details>
  <summary>Ответ</summary>
Необходим для скачивания нужных образов
</details>

11. Виды манифестов в kubernetes? 
<details>
  <summary>Ответ</summary>
- pod

- deployment

- service

- ingress

- persistent volumes

- persistent volumes claim 
</details>

12. Что такое node в Kubernetes?
<details>
  <summary>Ответ</summary>
 Это физические или виртуальные машины, на которых развертываются и запускаются контейнеры с приложениями. Совокупность нод образует кластер Kubernetes. Nodes бывают двух типов: Master (мастер-нода) — узел, управляющий всем кластером.
</details>


12. Что такое pod в Kubernetes?
<details>
  <summary>Ответ</summary>
Поды — это группы контейнеров, которые совместно используют ресурсы хранения и сетевые ресурсы одного узла. Они создаются с помощью сервера API и размещаются с помощью контроллера.
</details>

13. В чем разница между Init- и Sidecar-контейнерами?
<details>
  <summary>Ответ</summary>
Sidecar-контейнер — это контейнер, который должен быть запущен рядом с основным контейнером внутри пода. Этот паттерн нужен для расширения и улучшения функциональности основного приложения без внесения в него изменений. Представьте, что у вас есть под с одним контейнером, который очень хорошо работает, и вы бы хотели добавить какой-то функционал к этому контейнеру, не внося в него изменений. 

Init-контейнеры -- это специальные контейнеры, которые запускаются при инициализации пода до запуска основных контейнеров. Init-контейнеры подготавливают окружение для работы (выполнение миграций, проверки, склонировать Git-репозиторий, дождаться СУБД или другой сервис, создание конфигов, установка прав на файлы) и могут содержать в себе утилиты, которые не обязательны или не желательны в основном контейнере.

В целом, init-контейнеры работают как обычные контейнеры, за исключением следующих пунктов:

они всегда выполняются до завершения;

каждый init-контейнер должен успешно завершиться, чтобы запустился следующий.

Если init-контейнер завершается с ошибкой, то Kubernetes перезапускает весь под целиком (если, конечно, restartPolicy это позволяет).

</details>


14. Что такое Kubernetes deployment?
<details>
  <summary>Ответ</summary>
Deployment — это объект Kubernetes, представляющий работающее приложение в кластере. При создании объекта Deployment вы можете указать в его поле spec , что хотите иметь три реплики приложения. 
</details>

15. Объясните разницу между pod и deployment?
<details>
  <summary>Ответ</summary>
При создании одного или нескольких контейнеров через pod контейнеры будут в единичном формате а при создании контенеров через deployment есть возможность указать количество репликаций и кубернетис будет удерживать это количество реплик и следить за ними.
</details>

16. В чем разница между Deployment и StatefulSet?
<details>
  <summary>Ответ</summary>

Объект Deployment очень хорош для работы с приложениями, не сохраняющими состояние, а StatefulSets – с сохраняющими. Если вы планируете развертывать приложения, сохраняющие состояние, например, MySQL и Oracle, следует воспользоваться контроллером StatefulSets, а не объектом Deployment.

Контроллер StatefulSets предоставляет возможность пронумеровать все поды по порядку, начиная с нуля. Поэтому при работе с приложениями, сохраняющими состояние, легко обустроить архитектуру, в которой один под является ведущим, а остальные – его репликами.  При этом можно добиться что бы запрос на запись переадресовывался только на первый (ведущий) под, а запрос на считывание переадресовывался на три пода. При этом записанные данные будут синхронизироваться с другими подами. 

Если один из подов погибнет, то заново создается одноименный ему новый под. Эта возможность очень полезна и не нарушает цепочку кластеров с приложениями, сохраняющими состояние. Если же вы масштабируетесь вниз, то избыточные поды удаляются в обратном порядке. 

Резюмируя, обозначим, что StatefulSets обеспечивают следующие преимущества по сравнению с объектами Deployment:

Порядковые номера для каждого из подов.

Первый под может выступать в качестве ведущего, благодаря чему хорошо подходит для подготовки конфигурации с реплицируемой базой данных – такая конфигурация позволяет обрабатывать как чтение, так и запись.

Другие поды действуют в качестве реплик.

Новые поды будут создаваться лишь в случае, если более ранний под сейчас действует, причем, данные более раннего пода клонируются.

Поды удаляются в порядке, обратном тому, в котором создавались
</details>

17. Что такое service?
<details>
  <summary>Ответ</summary>
 Сервис – это абстракция, определяющая набор подов и политику доступа к ним. При создании сервиса будут созданы DNS записи по которым можно будет обращаться с любого Pod -а приложения текущего namespace.
</details>

18. Виды service?
<details>
  <summary>Ответ</summary>
- Cluster IP

- Node Port

- Load Balancer

- External Name 
</details>

19. Что такое clusterIP?
<details>
  <summary>Ответ</summary>
 ClusterIP: Предоставляет Службу на внутреннем IP-адресе кластера. Выбор этого значения делает службу доступной только внутри кластера. Это значение по умолчанию, которое используется, если вы явно не указываете a typeдля службы
</details>

20. Что такое NodePort?
<details>
  <summary>Ответ</summary>
Открытие порта пода для доступа вне кластера.

По умолчанию дается рандомно от 30000-32767

Можно указать в этом диапозоне самому.
</details>

21. Что такое Load Balancer ?
<details>
  <summary>Ответ</summary>
Предоставляет доступ к Службе извне с помощью балансировщика нагрузки облачного провайдера.
</details>

22. Что такое External Name ?
<details>
  <summary>Ответ</summary>
Сопоставляет службу с содержимым поля externalName(например, foo.bar.example.com), возвращая CNAMEзапись с ее значением. Никакого проксирования не настроено.
</details>

23. Что такое namespace?
<details>
  <summary>Ответ</summary>
  Namespace предоставляют механизм изоляции групп ресурсов в пределах одного кластера. Имена ресурсов должны быть уникальными в пространстве имен, но не между пространствами имен. 
</details>

24. Основные команды kubernetes? 
<details>
  <summary>Ответ</summary>
- kubectl apply -f (service, deployment, namespase, ingress, pvc, pv и т.д.) - 	Внести изменения в конфигурацию ресурса из файла или потока stdin

- kubectl get (service, deployment, namespase, ingress, pvc, pv и т.д.) - Вывести один или несколько ресурсов.

- kubectl autoscale - Автоматически промасштабировать набор подов, управляемых контроллером репликации.

- kubectl cluster-info - Показать информацию о главном узле и сервисах в кластере.

- kubectl delete - Удалить ресурсы из файла, потока stdin, либо с помощью селекторов меток, имен, селекторов ресурсов или ресурсов.

- kubectl exec - Выполнить команду в контейнере пода.

- kubectl describe - Показать подробное состояние одного или нескольких ресурсов.

- kubectl logs - Вывести логи контейнера в поде.

</details>

25. Как подключиться к кластеру kubernetes?
<details>
  <summary>Ответ</summary>

Для того, чтобы выполнять команды от текущего пользователя нужно скопировать конфиг администратора кластера.

Создайте каталог в home директории текущего пользователя:

HOME/.kube

Скопируйте конфиг администратора кластера:

/etc/kubernetes/admin.conf $HOME/.kube/config

Выставите права:

HOME/.kube/config

Также этот конфиг можно скопировать напрямую на хост, с которого вы хотите управлять кластером k8s.

</details>

